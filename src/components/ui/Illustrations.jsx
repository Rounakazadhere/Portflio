import React, { useState, useRef } from 'react';
import { motion, useScroll, useTransform, useSpring } from 'framer-motion';

// --- Animation Wrappers ---

// Parallax Float Effect (moves based on scroll)
export const ScrollFloat = ({ children, speed = 1, className }) => {
    const ref = useRef(null);
    const { scrollYProgress } = useScroll({
        target: ref,
        offset: ["start end", "end start"]
    });

    const y = useTransform(scrollYProgress, [0, 1], [0, -100 * speed]);
    const opacity = useTransform(scrollYProgress, [0, 0.2, 0.8, 1], [0, 1, 1, 0]);

    return (
        <motion.div ref={ref} style={{ y, opacity }} className={className}>
            {children}
        </motion.div>
    );
};

// Reveal Effect (scales up when in view)
export const ScrollReveal = ({ children, className, delay = 0 }) => {
    return (
        <motion.div
            initial={{ scale: 0, opacity: 0, rotate: -10 }}
            whileInView={{ scale: 1, opacity: 1, rotate: 0 }}
            viewport={{ once: true, margin: "-100px" }}
            transition={{
                type: "spring",
                stiffness: 260,
                damping: 20,
                delay: delay
            }}
            className={className}
        >
            {children}
        </motion.div>
    );
};

// Mouse Hover Effect (Keep for interactivity)
const InteractiveWrapper = ({ children, className }) => {
    const [isHovered, setIsHovered] = useState(false);

    return (
        <div
            className={`transition-transform duration-700 ease-out ${className}`}
            style={{
                transform: isHovered ? 'scale(1.05) rotate(3deg)' : 'scale(1) rotate(0deg)',
            }}
            onMouseEnter={() => setIsHovered(true)}
            onMouseLeave={() => setIsHovered(false)}
        >
            {children}
        </div>
    );
};

// --- Shapes ---

export const BlobGreen = ({ className }) => (
    <InteractiveWrapper className={className}>
        <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
            <path fill="#8ED462" d="M44.7,-76.4C58.9,-69.2,71.8,-59.1,81.6,-46.6C91.4,-34.1,98.1,-19.2,95.8,-5.3C93.5,8.6,82.2,21.4,70.6,31.4C59,41.4,47.1,48.6,35.6,55.6C24.1,62.6,13,69.4,0.7,68.1C-11.6,66.9,-20.5,57.6,-30.6,50.1C-40.7,42.6,-52,36.9,-60.9,28.2C-69.8,19.5,-76.3,7.8,-76.1,-3.9C-75.9,-15.6,-69,-27.3,-59.4,-36.8C-49.8,-46.3,-37.5,-53.6,-25.3,-62.3C-13.1,-71,-1,-81.1,13.2,-83.4C27.4,-85.7,54.8,-80.4,44.7,-76.4Z" transform="translate(100 100)" />
        </svg>
    </InteractiveWrapper>
);

export const BlobPink = ({ className }) => (
    <InteractiveWrapper className={className}>
        <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
            <path fill="#FF9A9E" d="M42.7,-73.2C55.9,-67.1,67.6,-57.4,76.1,-45.3C84.6,-33.2,89.9,-18.7,88.7,-4.8C87.5,9.1,79.8,22.4,70.2,33.8C60.6,45.2,49.1,54.7,36.9,62.4C24.7,70.1,11.8,76,-0.6,77.1C-13,78.2,-25.1,74.5,-36.4,67.5C-47.7,60.5,-58.2,50.2,-66.5,38C-74.8,25.8,-80.9,11.7,-80.4,-2.2C-79.9,-16.1,-72.8,-29.8,-63.3,-41.2C-53.8,-52.6,-41.9,-61.7,-29.6,-68.4C-17.3,-75.1,-4.6,-79.4,8.5,-78.9C10.6,-78.4,14.6,-73,20,-73" transform="translate(100 100)" />
        </svg>
    </InteractiveWrapper>
);

export const Squiggle = ({ className }) => (
    <InteractiveWrapper className={className}>
        <svg viewBox="0 0 100 20" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
            <path fill="none" stroke="#FFD700" strokeWidth="4" strokeLinecap="round" d="M5 10c2.5-5 7.5-5 10 0s7.5 5 10 0 7.5-5 10 0 7.5 5 10 0 7.5-5 10 0 7.5 5 10 0 7.5-5 10 0 7.5-5 10 0" />
        </svg>
    </InteractiveWrapper>
);

export const DoodleArrow = ({ className }) => (
    <InteractiveWrapper className={className}>
        <svg viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
            <path fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" d="M10 25s20-10 40 0 40-10 40-10m-10-5l10 15-15 5" />
        </svg>
    </InteractiveWrapper>
);

export const DoodleStar = ({ className }) => (
    <InteractiveWrapper className={className}>
        <svg viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg" className="w-full h-full text-yellow-400">
            <path fill="currentColor" d="M25 1L29.5 16.5H46L32.5 26.5L37 42L25 32.5L13 42L17.5 26.5L4 16.5H20.5L25 1Z" />
        </svg>
    </InteractiveWrapper>
);

export const DoodlePlanet = ({ className }) => (
    <InteractiveWrapper className={className}>
        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
            <circle cx="50" cy="50" r="30" fill="#818CF8" />
            <ellipse cx="50" cy="50" rx="45" ry="10" fill="none" stroke="#C7D2FE" strokeWidth="4" transform="rotate(-20 50 50)" />
        </svg>
    </InteractiveWrapper>
);

export const DoodleSpring = ({ className }) => (
    <InteractiveWrapper className={className}>
        <svg viewBox="0 0 50 150" xmlns="http://www.w3.org/2000/svg" className="w-full h-full fill-none stroke-current stroke-4">
            <path strokeLinecap="round" d="M25 10 Q45 25 25 40 Q5 55 25 70 Q45 85 25 100 Q5 115 25 130" stroke="#F472B6" strokeWidth="4" />
        </svg>
    </InteractiveWrapper>
);

export const DoodleBurst = ({ className }) => (
    <InteractiveWrapper className={className}>
        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" className="w-full h-full text-meelo-accent">
            <path fill="currentColor" d="M50 0L55 35L90 30L60 55L90 80L55 75L50 100L45 75L10 80L40 55L10 30L45 35L50 0Z" />
        </svg>
    </InteractiveWrapper>
);

export const DoodleCube = ({ className }) => (
    <InteractiveWrapper className={className}>
        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" className="w-full h-full fill-none stroke-current stroke-3">
            <path strokeLinecap="round" strokeLinejoin="round" d="M25 35 L50 20 L75 35 L75 65 L50 80 L25 65 Z M25 35 L50 50 M50 50 L75 35 M50 50 L50 80" strokeWidth="4" />
        </svg>
    </InteractiveWrapper>
);

export const DoodleZigzag = ({ className }) => (
    <InteractiveWrapper className={className}>
        <svg viewBox="0 0 100 30" xmlns="http://www.w3.org/2000/svg" className="w-full h-full fill-none stroke-current stroke-4">
            <path strokeLinecap="round" strokeLinejoin="round" d="M5 15 L20 5 L35 25 L50 5 L65 25 L80 5 L95 15" strokeWidth="4" />
        </svg>
    </InteractiveWrapper>
);

export const DoodleRing = ({ className }) => (
    <InteractiveWrapper className={className}>
        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
            <circle cx="50" cy="50" r="35" fill="none" stroke="currentColor" strokeWidth="5" strokeDasharray="10 10" />
        </svg>
    </InteractiveWrapper>
);

export const TimelineSVG = ({ className }) => (
    <div className={className}>
        <svg viewBox="0 0 1512 285" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
            <path d="M-101.993 190.252C-97.0376 187.973 -74.5167 178.267 -47.5684 187.145C-29.5757 193.071 -18.0464 204.503 -11.4966 213.054C-8.02963 217.584 -1.49425 218.21 2.80825 214.468C8.38805 209.615 16.849 204.373 28.1334 203.267C45.8717 201.526 58.9088 211.135 65.5162 217.589C68.5318 220.533 73.0696 221.211 76.8247 219.311C82.9807 216.194 91.773 213.011 102.491 212.833C122.928 212.496 138.087 223.293 146.351 231.089C150.097 234.624 155.907 234.658 159.729 231.205C163.619 227.684 169.165 223.904 176.541 221.773C186.98 218.758 196.224 220.446 202.337 222.5C206.543 223.914 211.153 222.375 213.655 218.7C217.895 212.486 224.8 204.777 235.331 199.823C254.092 190.998 277.405 194.186 296.555 207.629C300.401 210.332 305.587 209.985 308.992 206.744C320.636 195.658 340.876 180.027 369.836 172.395C424.007 158.125 469.188 182.24 483.713 191.219C486.071 192.676 488.923 193.066 491.589 192.306C502.83 189.093 518.383 186.164 536.808 187.145C567.843 188.8 591.29 200.718 604.428 209.062C607.497 211.01 611.396 211.106 614.541 209.293C620.02 206.133 628.692 202.516 639.218 203.271C653.744 204.305 667.074 213.318 675.261 227.025C678.281 232.08 684.961 233.451 689.657 229.911C694.498 226.27 701.076 222.538 709.446 220.484C722.118 217.373 733.033 219.532 739.866 221.788C743.731 223.067 747.995 221.797 750.55 218.623C758.396 208.874 773.47 193.811 796.749 187.145C829.008 177.911 864.951 188.271 891.524 213.472C894.818 216.598 899.817 217.026 903.63 214.559C910.189 210.317 919.197 205.772 930.487 203.267C955.265 197.769 976.081 205.431 986.275 210.346C989.267 211.789 992.796 211.621 995.629 209.884C1005.83 203.623 1021 196.355 1040.38 193.576C1080.5 187.828 1112.4 205.113 1126.52 214.511C1130 216.824 1134.56 216.68 1137.89 214.155C1143.59 209.832 1152.48 204.69 1164.14 203.262C1187.45 200.405 1205.06 214.429 1212.91 222.269C1215.73 225.087 1219.96 225.953 1223.64 224.419C1241.94 216.786 1271.34 208.091 1306.25 212.823C1315.29 214.049 1323.52 216.012 1330.85 218.315C1333.86 219.258 1337.13 218.743 1339.66 216.868C1346.71 211.659 1360.7 203.392 1379.64 203.262C1391.88 203.175 1401.82 206.518 1408.47 209.62C1412.15 211.337 1416.47 210.63 1419.42 207.84C1426.37 201.266 1435.86 194.326 1448.21 189.834C1497.25 171.996 1543.96 209.957 1547.39 212.828V284.993H-101.993V190.248V190.252Z" fill="#8ED462" />
            <path d="M1027.73 219.298C1026.2 201.344 1025.76 179.202 1028.48 154.106C1031.27 128.385 1036.65 106.392 1042.16 88.9141C1046.86 90.3713 1051.55 91.8286 1056.24 93.2859C1050.71 110.297 1044.61 136.215 1045.95 167.904C1046.82 188.465 1050.59 205.904 1054.58 219.298H1027.73Z" fill="#8ED462" />
            <path d="M1028.29 155.924C1027.42 154.005 1010.1 116.949 983.385 116.67C979.99 116.636 968.945 116.516 962.213 124.374C958.535 128.669 955.601 135.98 957.325 142.746C961.44 158.945 988.258 156.424 1010.22 177.778C1019.35 186.657 1024.21 196.323 1026.71 202.297C1028.65 197.107 1030.95 189.162 1031.29 179.24C1031.62 169.323 1029.88 161.239 1028.29 155.929V155.924Z" fill="#8ED462" />
            <path d="M1008.41 56.2913C990.606 61.9664 978.856 71.3929 978.962 80.9781C978.966 81.4398 979.029 84.1427 980.517 86.6581C988.897 100.807 1031.1 89.6687 1033.88 88.9136C1034.27 95.9114 1038.5 101.89 1044.32 103.828C1052 106.396 1061.66 101.644 1064.81 92.2082C1078.28 109.436 1095.35 115.582 1104.44 110.138C1110.1 106.752 1111.52 99.581 1111.75 98.2295C1113.7 87.1678 1105.87 74.5671 1091.6 67.8964C1107.29 57.6764 1115.45 43.1615 1112.23 31.7824C1111.85 30.4406 1109.73 23.539 1103.89 21.2353C1095.56 17.9553 1082.5 25.1454 1073.36 40.93C1075.31 21.2594 1069.41 5.39785 1059.16 1.50702C1058.28 1.17516 1053.46 -0.556231 1048.47 1.50702C1039.73 5.1189 1034.83 18.5613 1037.66 35.1105C1024.49 21.697 1007.78 21.8077 1002.48 28.1705C997.963 33.5908 999.759 45.9077 1008.39 56.2817L1008.41 56.2913Z" fill="#F5E211" />
            <path d="M1072.61 60.7147C1073.13 54.0945 1064.91 48.0521 1054.27 47.2187C1043.63 46.3852 1034.58 51.0763 1034.06 57.6966C1033.54 64.3168 1041.75 70.3592 1052.4 71.1927C1063.04 72.0261 1072.09 67.335 1072.61 60.7147Z" fill="#EBC1FF" />
            <path d="M79.2064 112.605C81.4921 132.04 82.851 154.765 81.9194 180.081C81.1223 201.81 78.7838 221.433 75.8354 238.554H114.971C110.217 222.313 105.814 202.921 103.221 180.841C99.8113 151.807 100.493 126.249 102.491 105.732C94.7309 108.022 86.9663 110.311 79.2064 112.6V112.605Z" fill="#8ED462" />
            <path d="M98.7682 124.082C136.403 114.579 162.654 89.961 157.402 69.0962C152.15 48.2314 117.384 39.0208 79.749 48.5238C42.1144 58.0268 15.863 82.6447 21.115 103.51C26.367 124.374 61.1335 133.585 98.7682 124.082Z" fill="#EBC1FF" />
            <path d="M99.1724 200.872C100.579 196.38 115.441 150.094 136.373 143.51C139.167 142.63 145.309 140.696 150.913 143.611C157.712 147.146 159.398 155.577 159.748 157.342C162.553 171.371 151.782 184.198 144.69 192.643C138.452 200.073 126.337 212.232 105.823 221.023L99.1724 200.877V200.872Z" fill="#8ED462" />
            <path d="M378.917 93.848L390.845 71.2148L418.129 77.1834L378.917 93.848Z" fill="#FF705C" />
            <path d="M451.608 62.9516L427.065 55.8145L412.396 79.6163L451.608 62.9516Z" fill="#FF705C" />
            <path d="M391.21 61.7882C392.333 69.2717 396.04 76.2261 401.61 81.3337C402.124 81.8051 402.888 81.0404 402.374 80.569C396.929 75.572 393.351 68.8148 392.251 61.4996C392.151 60.8119 391.109 61.1053 391.21 61.7882Z" fill="#2C2E2A" />
            <path d="M417.193 50.328C422.297 55.955 425.058 63.3615 424.972 70.9556C424.962 71.653 426.042 71.653 426.052 70.9556C426.139 63.073 423.253 55.3971 417.956 49.5633C417.486 49.0487 416.727 49.8134 417.193 50.328Z" fill="#2C2E2A" />
            <path d="M391.684 63.9217C396.081 62.9599 399.262 60.4237 398.79 58.2569C398.317 56.09 394.37 55.1132 389.973 56.0749C385.576 57.0367 382.395 59.573 382.867 61.7398C383.34 63.9066 387.287 64.8835 391.684 63.9217Z" fill="#2BA0FF" />
            <path d="M418.972 52.1012C422.387 49.1655 423.986 45.4212 422.544 43.7382C421.102 42.0552 417.164 43.0708 413.749 46.0066C410.334 48.9424 408.735 52.6866 410.177 54.3696C411.619 56.0526 415.557 55.037 418.972 52.1012Z" fill="#2BA0FF" />
            <path d="M419.349 129.12C421.61 136.459 423.747 144.625 425.514 153.552C427.704 164.618 428.933 174.858 429.562 184C438.729 186.29 447.896 188.579 457.063 190.868C457.312 180.47 456.462 165.97 451.603 149.55C448.357 138.59 444.136 129.514 440.198 122.449C433.245 124.671 426.297 126.893 419.344 129.115L419.349 129.12Z" fill="#8ED462" />
            <path d="M371.56 79.4095C367.436 101.615 376.939 123.45 394.552 133.674C418.196 147.396 451.877 137.522 463.805 111.585C473.798 89.8556 465.903 62.538 444.391 48.4512C440.42 54.9439 436.448 61.4319 432.472 67.9246C424.746 66.4048 417.02 64.885 409.294 63.3652C405.111 69.9493 400.924 76.5287 396.742 83.108C388.348 81.8719 379.949 80.6408 371.556 79.4047L371.56 79.4095Z" fill="#F5E211" />
            <path d="M109.401 202.513C117.151 191.215 125.309 180.207 133.876 169.52C136.277 166.524 138.712 163.552 141.175 160.603C141.617 160.074 140.858 159.305 140.411 159.839C131.533 170.463 123.048 181.414 114.985 192.668C112.781 195.746 110.611 198.843 108.469 201.965C108.075 202.542 109.012 203.08 109.401 202.513Z" fill="#2C2E2A" />
            <path d="M86.553 178.884C85.6742 176.07 76.3682 147.093 63.259 142.967C61.5063 142.414 57.66 141.207 54.1546 143.029C49.9001 145.242 48.8437 150.522 48.6228 151.624C46.8701 160.406 53.612 168.438 58.0537 173.728C61.9625 178.379 69.5447 185.992 82.3898 191.499L86.553 178.884Z" fill="#8ED462" />
            <path d="M80.9111 179.47C76.0372 172.361 70.8991 165.436 65.5114 158.707C63.9892 156.803 62.443 154.918 60.8824 153.052C60.4358 152.518 59.6771 153.287 60.1189 153.816C65.6555 160.439 70.9423 167.268 75.9651 174.285C77.3241 176.18 78.659 178.094 79.9795 180.013C80.3685 180.586 81.3096 180.042 80.9111 179.465V179.47Z" fill="#2C2E2A" />
            <path d="M1471.56 102.89C1469.78 118.04 1468.72 135.758 1469.45 155.491C1470.07 172.43 1471.89 187.728 1474.19 201.075C1464.02 201.075 1453.85 201.075 1443.68 201.075C1447.39 188.411 1450.83 173.3 1452.85 156.087C1455.5 133.454 1454.97 113.528 1453.41 97.5371C1459.46 99.3214 1465.51 101.106 1471.56 102.89H1471.56Z" fill="#8ED462" />
            <path d="M1516.69 95.6896C1520.78 79.4247 1500.32 60.2345 1470.98 52.8269C1441.64 45.4193 1414.54 52.5995 1410.45 68.8643C1406.36 85.1291 1426.82 104.319 1456.15 111.727C1485.49 119.135 1512.59 111.954 1516.69 95.6896Z" fill="#F5E211" />
            <path d="M1456 171.699C1454.9 168.197 1443.31 132.117 1427 126.981C1424.82 126.293 1420.03 124.787 1415.67 127.057C1410.36 129.813 1409.05 136.383 1408.78 137.758C1406.59 148.695 1414.99 158.694 1420.52 165.278C1425.38 171.069 1434.83 180.548 1450.82 187.401C1452.54 182.164 1454.27 176.931 1456 171.694L1456 171.699Z" fill="#8ED462" />
            <path d="M1448.86 172.493C1442.8 163.662 1436.42 155.058 1429.73 146.704C1427.82 144.324 1425.89 141.967 1423.94 139.63C1423.49 139.096 1422.73 139.865 1423.17 140.394C1430.07 148.652 1436.66 157.165 1442.93 165.913C1444.61 168.27 1446.28 170.646 1447.92 173.041C1448.31 173.613 1449.25 173.07 1448.85 172.493H1448.86Z" fill="#2C2E2A" />
        </svg>
    </div>
);
